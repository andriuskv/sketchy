(function(){"use strict";let i=0,e=null;onmessage=function({data:n}){const{id:t,type:o,action:f,duration:r}=n;o==="clock"?u():f==="start"?(clearTimeout(i),r?(e={id:t,duration:r||0},c(performance.now())):s(performance.now(),n.elapsed||0)):f==="stop"?(clearTimeout(i),i=0):f==="update-duration"&&e&&(e.duration=r)};function c(n){if(!e)return;const t=1e3,o=performance.now()-n;n+=t,e.duration-=1,i=self.setTimeout(()=>{postMessage({elapsed:n,diff:t,...e}),e&&e.duration>=0&&c(n)},t-o)}function s(n,t=0){const o=Math.random()*5+15,f=performance.now()-n;n+=o,t+=o,postMessage({diff:o,elapsed:t}),i=self.setTimeout(()=>{s(n,t)},o-f)}function u(n=0){const o=performance.now()-n;n+=1e3,postMessage(null),i=self.setTimeout(()=>{u(n)},1e3-o)}})();
